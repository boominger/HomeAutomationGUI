<?php $this->headTitle($this->translate('Dashboard')); ?>
<h1><?php echo $this->escapeHtml($this->translate('Dashboard')); ?></h1>
<div class="container" id="sockets">
	<div class="row show-grid">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 1</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_1_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_1_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 2</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_2_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_2_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 3</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_3_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_3_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 4</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_4_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_4_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 5</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_5_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_5_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Socket') ?> 6</label>
		</div>
		<div class="col-xs-6">
			<button type="button" id="socket_6_off" class="btn btn-default"><?php echo $this->translate('Off') ?></button>
			<button type="button" id="socket_6_on" class="btn btn-primary"><?php echo $this->translate('On') ?></button>
		</div>
	</div>
</div>
<hr />
<div class="container" id="sysinfo">
	<div class="row show-grid">
		<div class="col-xs-6">
			<label><?php echo $this->translate('Temperature') ?></label>
		</div>
		<div class="col-xs-6">
			18 &deg;
		</div>
	</div>
</div>
<script type="text/javascript">
$(function() {
	$('#sockets button.btn').click(function() {
		var buttonInfo = $(this).attr('id').split('_');
		$.ajax({
			url: '<?php echo $this->url('homeautomation', array('action' => 'ajax')) ?>',
			data: { mode: 'socket', socket: buttonInfo[1], status: buttonInfo[2] },
			dataType: 'json'
		}).done(function(data) {
			if(data.success == true) {
				BootstrapDialog.show({
					type: BootstrapDialog.TYPE_SUCCESS,
					title: '<?php echo $this->translate('Success') ?>',
					message: 'Socket "' + buttonInfo[1] + '" was powered ' + buttonInfo[2],
				});
			} else {
				BootstrapDialog.show({
					type: BootstrapDialog.TYPE_WARNING,
					title: '<?php echo $this->translate('Error') ?>',
					message: 'Socket "' + buttonInfo[1] + '" could not be powered ' + buttonInfo[2],
				}); 
			}			
		}).fail(function() {
            BootstrapDialog.show({
                type: BootstrapDialog.TYPE_WARNING,
                title: '<?php echo $this->translate('Error') ?>',
                message: 'Request failed.',
            });     
		})
	});
});
</script>